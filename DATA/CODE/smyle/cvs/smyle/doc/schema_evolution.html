<html>
<head>
<title>SMYLE: Schema evolution</title>
</head>
<body bgcolor="#ffffff" text="#000000">
<table>
<tr>
<td valign="top">
<table>
<tr>
<td><a href="index.html"><img border="0" src="smyle_small.jpg"></a></td>
</tr>
<tr>
<td><a href="index.html">Home</a></td>
</tr>
<tr>
<td><a href="http://sourceforge.net/project/showfiles.php?group_id=34021">Download!</a></td>
</tr>
<tr>
<td><a href="features.html">Features</a></td>
</tr>
<tr>
<td><a href="benchmark.html">Benchmark</a></td>
</tr>
<tr>
<td><a href="users.html">Users</a></td>
</tr>
<tr>
<td><a href="gettingstarted.html">Getting started</a></td>
</tr>
<tr>
<td><a href="concepts.html">Concepts</a></td>
</tr>
<tr>
<td><a href="data_types.html">Data types</a></td>
</tr>
<tr>
<td><a href="javaapi/index.html">API (Java)</a></td>
</tr>
<tr>
<td><a href="gjapi/index.html">API (GJ)</a></td>
</tr>
<tr>
<td><a href="idioms.html">Idioms</a></td>
</tr>
<tr>
<td><a href="architecture.html">Architecture</a></td>
</tr>
<tr>
<td><a href="performance.html">Performance Tips</a></td>
</tr>
<tr>
<td><a href="idl.html">IDL Grammar</a></td>
</tr>
<tr>
<td><a href="browser.html">Browser</a></td>
</tr>
<tr>
<td><a href="schema_evolution.html">Schema evolution</a></td>
</tr>
<tr>
<td><a href="gj.html">GJ (Generic Java)</a></td>
</tr>
<tr>
<td><a href="limitations.html">Limitations</a></td>
</tr>
<tr>
<td><a href="history.html">History</a></td>
</tr>
<tr>
<td><a href="http://sourceforge.net/forum/forum.php?forum_id=106587">Help Forum</a></td>
</tr>
</table>
</td><td width="20"></td><td valign="top">
<h2>SMYLE: Schema evolution</h2>
  <i>Schema evolution</i> takes place when you change the underlying IDL description (<i>schema</i>)
  of a table that already contains data.
  
  <h3>Adding fields</h3>
  Suppose you change your IDL definition from
  <pre>
    struct Person {
      string name;
      long age;
    };
  </pre>
  to
  <pre>
    struct Person {
      string name;
      long age;
      int gender;
    };
  </pre>
  
  This kind of schema evolution is fully supported by Smyle. After you compiled the new
  schema, the first time you reopen the table, it is converted to the new schema automatically.
  <p>
</p>
  Note: If after this point you try to access the table with the old schema again, you will
  only have read access to the table. Essentially, you're trying to remove the new
  field again (see next section).
  
  <h3>Removing fields</h3>
  Suppose you change your IDL definition from
  <pre>
    struct Person {
      string name;
      long age;
    };
  </pre>
  to
  <pre>
    struct Person {
      string name;
    };
  </pre>
  
  If you do this, you can still open the table. But you now have what I call an <i>impaired view</i>
  - you're not able to see all the fields in the table.
  <p>
</p>
  If you try to create or alter rows while having an impaired view, semantic problems arise -
  what happens with the additional fields? For this reason, Smyle only grants read access to
  impaired view clients. Any calls to modifying methods such as add(T) raise an
  ImmutableTableException.
  
  <h3>Reordering fields</h3>
  This is fully supported.
  <p>
</p>
  You should note, however, that in the current version this also requires a full conversion of
  the table. So what you should try to avoid is having clients with different schemae
  access the table in turn.
  
  <h3>Renaming the struct</h3>
  This is fully supported. (It currently requires a conversion too.)
  
  <h3>More sophisticated schema evolution</h3>
  ...is currently not supported. You will need to convert your table manually. (Just create another
  table and copy all the entries in a loop).
  
</td>
</tr>
<tr>
<td colspan="3">
<hr>
<table width="100%">
<tr>
<td>
          Author: Stefan Reich (<a href="mailto:doc@drjava.de">doc@drjava.de</a>)<br>
          Smyle Homepage: <a href="http://www.drjava.de/smyle/">www.drjava.de/smyle</a>
<br>
</td><td align="right"><A href="http://sourceforge.net"><IMG src="http://sourceforge.net/sflogo.php?group_id=34021" width="88" height="31" border="0" alt="SourceForge Logo"></A></td>
</tr>
</table>
</td>
</tr>
</table>
</body>
</html>
